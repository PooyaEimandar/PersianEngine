/*
 * Copyright (c) BaziPardaz.Co Ltd. All rights reserved.
 * 
 * File Name        : BezierInfo.cs
 * File Description : This class contains bezier calculation for animating the model
 * Generated by     : Seyed Mahdi Hosseini
 * Last modified by : Seyed Mahdi Hosseini on 9/14/2013
 * Comment          : 
 */

using Microsoft.Xna.Framework;

namespace PersianCore.Framework.PA
{
    public struct BezierInfo
    {
        //http://collada.org/public_forum/showthread.php/909-Animation-Bezier-interpolation
        public float[] Array { get; set; }
        //public int Stride { get; set; }
        public static Matrix BezierCoefficientsMatrix;
        public float[] GetControlPoint(int startIndex)
        {
            if (startIndex > Array.Length) return null;
            return new[] { Array[0 + startIndex], Array[1 + startIndex] };
        }
        public float[] GetC1()
        {
            return new[] { Array[2], Array[3] };
        }
        static BezierInfo()
        {
            var m = new Matrix
            {
                M11 = -1,
                M12 = 3,
                M13 = -3,
                M14 = 1,
                M21 = 3,
                M22 = -6,
                M23 = 3,
                M24 = 0,
                M31 = -3,
                M32 = 3,
                M33 = 0,
                M34 = 0,
                M41 = 1,
                M42 = 0,
                M43 = 0,
                M44 = 0
            };
            BezierCoefficientsMatrix = m;
        }
    }
}
