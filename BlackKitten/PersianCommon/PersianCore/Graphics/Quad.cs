/*
 * Copyright (c) BaziPardaz.Co Ltd. All rights reserved.
 * 
 * File Name        : QuadRenderer.cs
 * File Description : Quad Renderer
 * Generated by     : Pooya Eimandar
 * Last modified by : Pooya Eimandar on 5/18/2013
 * Comment          : 
 */

using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace PersianCore.Graphics
{
    public class Quad
    {
        #region Fields & Properties

        VertexPositionTexture[] vBuffer;
        short[] iBuffer;

        #endregion

        #region Constructor/Destructor

        public Quad()
        {
            this.vBuffer = new VertexPositionTexture[4]
            {
                new VertexPositionTexture(new Vector3(-1, 1, 1), new Vector2(0, 0)),
                new VertexPositionTexture(new Vector3(1, 1, 1), new Vector2(1, 0)),
                new VertexPositionTexture(new Vector3(-1, -1, 1), new Vector2(0, 1)),
                new VertexPositionTexture(new Vector3(1, -1, 1), new Vector2(1, 1))
            };
            this.iBuffer = new short[] { 0, 3, 2, 0, 1, 3 };
        }

        ~Quad()
        {
        }

        #endregion

        #region Methods

        public void Draw()
        {
            Draw(-Vector2.One, Vector2.One, null);
        }

        public void Draw(SamplerState samplerState)
        {
            Draw(-Vector2.One, Vector2.One, samplerState);
        }

        public void Draw(Vector2 v1, Vector2 v2)
        {
            Draw(v1, v2, null);
        }

        public void Draw(Vector2 v1, Vector2 v2, SamplerState samplerState)
        {
            vBuffer[0].Position.X = v1.X;
            vBuffer[0].Position.Y = v2.Y;

            vBuffer[1].Position.X = v2.X;
            vBuffer[1].Position.Y = v2.Y;

            vBuffer[2].Position.X = v1.X;
            vBuffer[2].Position.Y = v1.Y;

            vBuffer[3].Position.X = v2.X;
            vBuffer[3].Position.Y = v1.Y;

            if (samplerState != null)
            {
                Persian.GDevice.SamplerStates[0] = samplerState;
            }
            Persian.GDevice.DrawUserIndexedPrimitives<VertexPositionTexture>(
                PrimitiveType.TriangleList,
                this.vBuffer, 
                0,
                4, 
                this.iBuffer, 
                0,
                2);
        }

        #endregion
    }
}
