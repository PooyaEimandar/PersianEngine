/*
 * Copyright (c) BaziPardaz.Co Ltd. All rights reserved.
 * 
 * File Name        : NullableVector3.cs
 * File Description : A null able vector3
 * Generated by     : Pooya Eimandar
 * Last modified by : Pooya Eimandar on 8/27/2013
 * Comment          : 
 */

using System;
using Microsoft.Xna.Framework;

public class NullableVector3
{
    public float? X, Y, Z;

    public NullableVector3()
        : this(null, null, null)
    {
    }

    public NullableVector3(Vector3 Point)
    {
        this.X = Point.X;
        this.Y = Point.Y;
        this.Z = Point.Z;
    }

    public NullableVector3(float? X, float? Y, float? Z)
    {
        this.X = X;
        this.Y = Y;
        this.Z = Z;
    }

    public NullableVector3(string text)
    {
        this.X = null;
        this.Y = null;
        this.Z = null;

        int index;
        sbyte counter = 0;

        string FetchingStr = string.Empty;

        while (true)
        {
            //find next space
            index = text.IndexOf(" ");

            #region Check for Breaking

            if (index != -1)
            {
                FetchingStr = text.Substring(0, index).ToLower();
            }
            else
            {
                #region Final checking before break

                if (text != null && text != string.Empty)
                {
                    this.Z = GetNullableFloat(text);
                }
                break;

                #endregion
            }

            #endregion

            #region Save Data

            if (counter == 0)
            {
                this.X = GetNullableFloat(FetchingStr);
            }
            else
            {
                this.Y = GetNullableFloat(FetchingStr);
            }

            #endregion

            //ready for next searching
            counter++;
            text = text.Substring(index + 1, text.Length - index - 1);
        }
    }

    private float? GetNullableFloat(string str)
    {
        if (str == "x" || str == "null")
        {
            return null;
        }
        return (float)Convert.ToDouble(str);
    }
}
